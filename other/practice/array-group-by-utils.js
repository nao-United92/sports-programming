/**
 * Creates an object with keys generated by running each element of array thru iteratee.
 * The corresponding value of each key is an array of elements responsible for generating the key.
 *
 * @param {Array} array The array to iterate over.
 * @param {Function} iteratee The iteratee to transform keys.
 * @returns {Object} Returns the composed aggregate object.
 */
const groupBy = (array, iteratee) => {
  const func = typeof iteratee === 'function' ? iteratee : (value) => value[iteratee];
  return array.reduce((acc, value) => {
    const key = func(value);
    if (!acc[key]) {
      acc[key] = [];
    }
    acc[key].push(value);
    return acc;
  }, {});
};

export { groupBy };