/**
 * Creates an object with the same keys as `obj` and values generated by
 * running each own enumerable string keyed property of `obj` thru `iteratee`.
 * The iteratee is invoked with three arguments: (value, key, object).
 *
 * @param {Object} obj The object to iterate over.
 * @param {Function} iteratee The function invoked per iteration.
 * @returns {Object} Returns the new mapped object.
 */
function mapValues(obj, iteratee) {
  if (typeof obj !== 'object' || obj === null || Array.isArray(obj)) {
    return {};
  }
  if (typeof iteratee !== 'function') {
    return { ...obj
    }; // Return a shallow copy if no valid iteratee
  }

  const result = {};
  for (const key in obj) {
    if (Object.prototype.hasOwnProperty.call(obj, key)) {
      result[key] = iteratee(obj[key], key, obj);
    }
  }
  return result;
}

module.exports = mapValues;
